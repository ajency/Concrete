<div class="pageLayout">
  <div class="testimonial-banner deskMode" style="background:url('{{ section.settings.desktop_image | img_url: 'master' }}') no-repeat">
    <div class="container">  
      <div class="banner-content">
            <h1 style="color: {{section.settings.header_title_color}};">{{section.settings.d_title}}</h1>
            <p style="color: {{section.settings.subtitle_color}};">{{section.settings.subtitle}}</p>
        </div>
    </div>
  </div>
  <div class="testimonial-banner mobileMode" style="background:url('{{ section.settings.mob_image | img_url: 'master' }}') no-repeat">
    <div class="container">
      <div class="banner-content">
          <h1 style="color: {{section.settings.mweb_header_title_color}};">{{section.settings.m_title}}</h1>
          <p style="color: {{section.settings.mweb_subtitle_color}};">{{section.settings.subtitle}}</p>
      </div>
    </div>
  </div>
  {% if section.blocks.size > 0 %}
  	<div class="column-layout">
       {% for block in section.blocks %}
      <div class="row block-wrapper container m-auto">
          <div class="col-sm-6 col-xs-12">
            {%- if block.settings.image != blank -%}
            	<img class="testimonial-feature-img" alt="Hk vitals testimonials" src="{{ block.settings.image | img_url: '600x' }}" />
            {%- endif -%}
          </div>
          <div class="col-sm-6 col-xs-12">
            <div class="content">
              <h4 class="name">{{block.settings.author}}</h4>
              <p class="role">{{block.settings.designation}}</p>
              <div class="quote">{{block.settings.quote}}</div>
              <h6 class="quote-subtext">{{block.settings.subtext}}</h6>
              <div class="nutrient-list">
                {%- assign product1 = all_products[block.settings.product1] -%}
                {%- assign product2 = all_products[block.settings.product2] -%}
                {%- assign product3 = all_products[block.settings.product3] -%}
                {%- assign current_variant = product.selected_or_first_available_variant -%}
                {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
                {%- if block.settings.product1 != blank -%}
                <a href="{{product1.url}}" title="{{ product1.title }}" class="item" data-section-id="{{ section.id }}" data-section-type="product1">
                  <img src="{{ product1.featured_image | img_url: 'small' }}">
                  <span class="ml-0">{{ product1.title }}</span>
                </a>
                {%- endif -%}
                {%- if block.settings.product2 != blank -%}
                <a href="{{product2.url}}" title="{{ product2.title }}" class="item" data-section-id="{{ section.id }}" data-section-type="product2">
                  <img src="{{ product2.featured_image | img_url: 'small' }}">
                  <span class="ml-0">{{ product2.title }}</span>
                </a>
                {%- endif -%}
                {%- if block.settings.product3 != blank -%}
                <a href="{{product3.url}}" title="{{ product3.title }}" class="item" data-section-id="{{ section.id }}" data-section-type="product3">
                  <img src="{{product3.featured_image | img_url: 'small'}}">
                  <span class="ml-0">{{ product3.title }}</span>
                </a>
                {%- endif -%}
              </div>
            </div>
          </div>
      </div>
      {% endfor %}
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": {
    "en": "Testimonials"
  },
  "class": "index-section",
  "max_blocks": 9,
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Banner"
    },
    {
      "type": "image_picker",
      "id": "mob_image",
      "label": "Mobile Banner"
    },
    {
      "type": "text",
      "id": "d_title",
      "label":"Desktop Heading"
	},
    {
      "type": "color",
      "id": "header_title_color",
      "label": "Header Color"
    },
    {
      "type": "text",
      "id": "m_title",
      "label":"Mobile Heading"
	},
    {
      "type": "color",
      "id": "mweb_header_title_color",
      "label": "Mobile Header Color"
    },
	{
      "type": "text",
      "id": "subtitle",
      "label": "Sub Title"
	},
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "subtitle color"
    },
    {
      "type": "color",
      "id": "mweb_subtitle_color",
      "label": "mobile subtitle color"
    }
  ],
  "blocks": [
    {
      "type": "quote",
      "name": {
        "en": "Testimonial"
      },
      "settings": [
        {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
        },
        {
          "type": "text",
          "id": "author",
          "label": {
            "en": "Author"
          },
          "default": {
            "en": "Author's name"
          }
        },
        {
          "type": "text",
          "id": "designation",
          "label": {
            "en": "Designation"
          },
          "default": {
            "en": "Designation"
          }
        },
        {
          "type": "text",
          "id": "quote",
          "label": {
            "en": "Text"
          }
        },
        {
          "type": "text",
          "id": "subtext",
          "label": "Tag line"
        },
        {
          "type": "product",
          "id": "product1",
          "label": "First Product"
        },
        {
          "type": "product",
          "id": "product2",
          "label": "Second Product"
        },
        {
          "type": "product",
          "id": "product3",
          "label": "Third Product"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonial Block",
      "category": "Image"
    }
  ]
}
{% endschema %}
<script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "Product",
  "name": "{{ product.title | escape }}",
  "url": "{{ shop.url }}{{ product.url }}",
  {% if product.featured_image %}
    {% assign image_size = product.featured_image.width | append: 'x' %}
    "image": [
      "https:{{ product.featured_image.src | img_url: image_size }}"
    ],
  {% endif %}
  "description": "{{ product.description | strip_html | escape }}",
  {% if current_variant.sku != blank %}
    "sku": "{{ current_variant.sku }}",
  {% endif %}
  "brand": {
    "@type": "Thing",
    "name": "{{ product.vendor | escape }}"
  },
  {% if product.variants %}
    "offers": [
      {% for variant in product.variants %}
        {
          "@type" : "Offer",
          "availability" : "http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}",
          "price" : "{{ variant.price | divided_by: 100.00 }}",
          "priceCurrency" : "{{ shop.currency }}",
          "url" : "{{ shop.url }}{{ variant.url }}",
          "itemOffered" :
          {
              "@type" : "Product",
              {% if variant.image %}
                {% assign variant_image_size = variant.image.width | append: 'x' %}
                "image": "http:{{ variant.image.src | img_url: variant_image_size }}",
              {% endif %}
              {% if variant.title != blank %}
                "name" : "{{ variant.title | escape }}",
              {% endif %}
              {% if variant.sku != blank %}
                "sku": "{{ variant.sku }}",
              {% endif %}
              {% if variant.weight != blank %}
                "weight": {
                  "@type": "QuantitativeValue",
                  {% if variant.weight_unit != blank %}
                    "unitCode": "{{ variant.weight_unit }}",
                  {% endif %}
                  "value": "{{ variant.weight | weight_with_unit: variant.weight_unit }}"
                },
              {% endif %}
              "url": "{{ shop.url }}{{ variant.url }}"
          }
        }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  {% endif %}
}
</script>

