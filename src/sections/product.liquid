<section class="single-product-template" data-section-id="{{ section.id }}" data-section-type="product">
  {%- assign current_variant = product.selected_or_first_available_variant -%}
  {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
  {% assign enable_zoom = true %}
  <div class="container row  m-auto">
    <div class="col-md-5 col-sm-12  m-auto">
      <div class="product-image-slider slider">
        {% for image in product.images %}
          {% capture wrapper_class %}
            {%- unless featured_image == image -%}
              hide
            {%- endunless -%}
          {% endcapture %}

          {% render 'responsive-image' with
            image: image,
            max_width: 700,
            max_height: 800,
            image_attributes: "data-product-featured-image",
            wrapper_class: wrapper_class,
            wrapper_attributes: "data-product-image-wrapper",
          %}
        {% endfor %}
      </div>
      {% if product.images.size > 1 %}
        <ul class="product-variant">
          {% for image in product.images %}
            <li>
              <a href="{{ image.src | img_url: '480x480' }}" data-thumbnail-id="{{ image.id }}" data-product-single-thumbnail{% if featured_image == image %} aria-current="true"{% endif %}>
                <img class="product-single__thumbnail-image" src="{{ image.src | img_url: '160x160' }}" alt="{{ image.alt | escape }}">
              </a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>


    <div class="col-md-6 col-sm-12 product-detail">
      <h1 class="title">{{ product.title }}</h1>

      <div class="rte description">
        {{ product.description }}
      </div>
      <div class="tag">
        {% assign tags = product.metafields.product_meta.tags_img | split: ";" %}
        {% assign tags_text = product.metafields.product_meta.tags_text | split: ";" %}
        {% for tag in tags %}
        {% assign index = forloop.index | minus: 1%}
        {% capture tag_slug %}{{ tag | replace: " ", "_" | replace: "/", "_" | replace: "&", "_" }}{% endcapture %}
        {% assign img_svg = 'tag' | append: '-' | append: tag_slug | append: '.png'%}
        {% assign img_default = 'tag' | append: '-' | append: 'default' | append: '.png'%}        
        <div class="tag-icon col-2 text-center">
          <img height="48px" width="45px" class='item-tag icon-img' src="{{ img_svg | file_url }}" alt="{{ tags_text[index] }}" title="{{ tags_text[index] }}"/>
          <span class="icon-title">{{ tags_text[index] }}</span>
        </div>
        {% endfor %}
      </div>
      <hr class="seperator mt-0">
      {% form 'product', product, data-product-form: '', data-product-handle: product.handle, data-enable-history-state: 'true' %}

        {% for option in product.options_with_values %}
          <div class="js">
            {% if product.has_only_default_variant %}

              {%- comment -%}
                We need a hidden default value if the product has only one variant
              {%- endcomment -%}
              <input type="hidden" id="Option1" name="options[Title]" value="{{ product.variants[0].title }}">

            {% else %}
              {% if forloop.index0 > 0 %}

                {% for value in option.values %}
                  <input type="radio" id="Option{{ option.position }}-{{ value }}" name="options[{{ option.name }}]" value="{{ value }}"{% if option.selected_value == value %} checked{% endif %}>
                  <label for="Option{{ option.position }}-{{ value }}">{{ value }}</label>
                {% endfor %}

              {% else %}

                <div class="product-size" 
                  id="Option{{ option.position }}"
                  name="options[{{ option.name | escape }}]">
                  {% for value in option.values %}
                    <span
                      class="option"
                      value="{{ value | escape }}"
                      {% if option.selected_value == value %}selected="selected"{% endif %}>
                        {{ value }} Tablets
                    </span>
                  {% endfor %}
                </div>
                <div class="product-size">
                {%- for variant in product.variants -%}         
                  <input 
                    type="radio" 
                    name="id" 
                    class="option"
                    value="{{ variant.id }}" 
                    id="variant-option-{{ variant.id }}" 
                    {% unless variant.available %} disabled{% endunless %}
                    {% if product.selected_variant.id == variant.id %} checked{% endif %}
                  >
                  <label for="variant-option-{{ variant.id }}">{{ variant.title }} Tablets</label>
                  {%- endfor -%}
                </div>
              {% endif %}
            {% endif %}
          </div>
        {% endfor %}

        <div class="product-price-section" data-price-wrapper>
          <div class="price">
            <div class="product-price" data-product-price>
              {{ current_variant.price | money_without_trailing_zeros | remove: "," }}
            </div>
            <div>
              {% if product.compare_at_price_max > product.price %}
                <span class="visually-hidden" data-compare-text>{{ 'products.product.regular_price' | t }}</span>
                <span class="product-sale-price" data-compare-price>
                  {% if current_variant.compare_at_price > current_variant.price %}
                    {{ current_variant.compare_at_price | money_without_trailing_zeros | remove: "," }}
                  {% endif %}
                </span>
              {% endif %}
              <span class="product-offer">
                {% assign savePrice = current_variant.compare_at_price | minus: current_variant.price %}
                  {% assign results = 0.000 | plus:savePrice | divided_by: current_variant.compare_at_price | times: 100 | round %}
                   ({{ results }}% Off)
               </span>
            </div>
          </div>
          <div class="add-to-cart"> 
            <button
              type="submit"
              name="add"
              class="btn-text"
              data-submit-button
              {% unless current_variant.available %}disabled="disabled"{% endunless %}>
                <span data-submit-button-text>
                  {% if current_variant.available %}
                    + {{ 'products.product.add_to_cart' | t }}
                  {% else %}
                    {{ 'products.product.sold_out' | t }}
                  {% endif %}
                </span>
            </button>
          </div>
        </div>

        <noscript>
          <select name="id">
            {% for variant in product.variants %}
              <option
                {% if variant == current_variant %}selected="selected"{% endif %}
                {% unless variant.available %}disabled="disabled"{% endunless %}
                value="{{ variant.id }}">
                  {{ variant.title }}
              </option>
            {% endfor %}
          </select>
        </noscript>

      <!--   <label for="Quantity">{{ 'products.product.quantity' | t }}</label>
        <input type="number" id="Quantity" name="quantity" value="1" min="1"> -->

      {% endform %}
      <hr class="seperator">

      {% if section.settings.show_share_buttons %}
        {% render 'social-sharing', share_title: product.title, share_permalink: product.url, share_image: product %}
      {% endif %}
    </div>
  </div>
  <div class="product-highlight">
    {%- include "product-highlight" -%}
  </div>
  <div class="accordion">
    {%- include "product-accordion" -%}
  </div>
  <div class="customer-review container">
    <div id="shopify-product-reviews" data-id="{{product.id}}">{{ product.metafields.spr.reviews }}</div>
  </div>
  <div class="suggested-products">
    {% include 'related-products' %}
  </div>
  <div class="faq">
    {%- include "product-faq" -%}
  </div>
</section>

{% schema %}
  {
    "name": "Product pages",
    "class": "product",
    "settings": [
      {
        "type": "checkbox",
        "id": "show_share_buttons",
        "label": "Show social sharing buttons",
        "default": true
      }
    ]
  }
{% endschema %}
